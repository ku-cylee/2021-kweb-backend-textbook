\usepackage{amsthm}
\usepackage{mdframed}
\usepackage{fancyvrb}

\newcommand\cd\texttt

\definecolor{codebgcolor}{HTML}{E7E7E7}

\mdfdefinestyle{codeframe}{
    hidealllines=true,
    backgroundcolor=codebgcolor,
    innertopmargin=-3pt,
    innerbottommargin=8pt,
}

\makeatletter
\def\thmhead@plain#1#2#3{%
    \thmname{#1}\thmnumber{\@ifnotempty{#1}{ }\@upn{#2}}%
    \thmnote{ {\the\thm@notefont#3}}}
\let\thmhead\thmhead@plain
\makeatother

\newtheoremstyle{codestyle}% name of the style to be used
    {20pt}% measure of space to leave above the theorem. E.g.: 3pt
    {}% measure of space to leave below the theorem. E.g.: 3pt
    {}% name of font to use in the body of the theorem
    {}% measure of space to indent
    {\bfseries}% name of head font
    {}% punctuation between head and body
    {0pt}% space after theorem head
    {}% Manually specify head
\theoremstyle{codestyle}

\newtheorem{code}{Code}[chapter]
\newenvironment{codeenv}[2]
    {\vspace{10pt}\begin{mdframed}[style=codeframe]\begin{code}[#2]\label{#1}\linespread{1.1}{\ }}
    {\end{code}\end{mdframed}\vspace{6pt}}

\newtheorem{shell}{Shell}[chapter]
\newenvironment{shellenv}[2]
    {\vspace{10pt}\begin{mdframed}[style=codeframe]\begin{shell}[#2]\label{#1}\linespread{1.1}{\ }}
    {\end{shell}\end{mdframed}\vspace{6pt}}

\newtheorem{sql}{SQL}[chapter]
\newenvironment{sqlenv}[2]
    {\vspace{10pt}\begin{mdframed}[style=codeframe]\begin{sql}[#2]\label{#1}\linespread{1.1}{\ }}
    {\end{sql}\end{mdframed}\vspace{6pt}}
